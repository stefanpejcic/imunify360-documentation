import{_ as e}from"./ImunifyAgentNotRunning-4df3d20b.js";import{_ as i,n,p as t,a7 as a}from"./framework-9921d369.js";const s="/images/SendNotifications.png",d={},r=a('<h1 id="faq-and-known-issues" tabindex="-1"><a class="header-anchor" href="#faq-and-known-issues" aria-hidden="true">#</a> FAQ and Known Issues</h1><h3 id="imunify-agent-is-not-running-troubleshooting" tabindex="-1"><a class="header-anchor" href="#imunify-agent-is-not-running-troubleshooting" aria-hidden="true">#</a> &quot;Imunify agent is not running&quot; troubleshooting</h3><p>Having the Imunify service installed, you may come across the situation when the message <span class="notranslate">&quot;Imunify agent is not running&quot;</span> is displayed when you try to access the Dashboard:</p><p><img src="'+e+`" alt=""></p><p>First of all, try to check the status of the service via the command line using the following command:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># service imunify-antivirus status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>In case you see the agent is inactive:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@host ~]# service imunify360 status


Redirecting to /bin/systemctl status imunify360.service
● imunify360.service - Imunify360 agent
Loaded: loaded (/usr/lib/systemd/system/imunify360.service; disabled; vendor preset: disabled)
Active: inactive (dead)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>try to start it via the following command:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># service imunify-antivirus start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>It may also occur that despite the Imunify’s Dashboard showing the <span class="notranslate">&quot;agent is not running&quot;</span>, the service itself is loaded and active.</p><p>You can check it with the following command:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># service imunify-antivirus status -l
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>Example output:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@host ~]# service imunify360 status -l

Redirecting to /bin/systemctl status -l imunify360.service
● imunify360.service - Imunify360 agent
Loaded: loaded (/usr/lib/systemd/system/imunify360.service; enabled; vendor preset: disabled)
Active: active (running) since Mon 2020-05-13 02:58:43 WIB; 3min 54s ago
Main PID: 1234567 (python3)
Status: &quot;Demonized&quot;
CGroup: /system.slice/imunify360.service
├─1234567 /opt/alt/python35/bin/python3 -m im360.run --daemon --pidfile /var/run/imunify360.pid
├─1234568 /usr/bin/tail --follow=name -n0 --retry /usr/local/cpanel/logs/cphulkd.log
├─1234569 /usr/bin/tail --follow=name -n0 --retry /etc/apache2/logs/modsec_audit.log
├─1234570 /usr/bin/tail --follow=name -n0 --retry /var/ossec/logs/alerts/alerts.json
└─1234571 /opt/alt/python27/bin/python2.7 -s /usr/sbin/cagefsctl --wait-lock --force-update-etc
May 13 02:58:39 host.domain.com systemd[1]: Starting Imunify360 agent…
May 13 02:58:43 host.domain.com systemd[1]: Started Imunify360 agent.
May 13 02:58:43 host.domain.com imunify-service[4072717]: Starting migrations
May 13 02:58:43 host.domain.com imunify-service[4072717]: There is nothing to migrate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Most often, such circumstances attest that the Imunify service has been recently installed on the server. Sometimes, a desynchronization between the agent and the web interface may occur in such cases, and it can take a bit of time for the database to be integrated completely.</p><p>In case the issue is still the same after 60 minutes, you can try creating the backup of the Imunify files and do the service restart to force the sync process:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># service imunify-antivirus stop
# mv /var/imunify360/files /var/imunify360/files_backup
# service imunify-antivirus start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>After these actions, wait until the files downloading and the migration process are complete – the agent will synchronize with the web interface and start working normally. You can monitor this process via</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># tail -f /var/log/imunify360/console.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>Another similar workaround may be handy in case you locate some database-related error inside the <span class="notranslate"><code>/var/log/imunify360/error.log</code></span> – by renaming the database file and restarting the service. There may be errors like</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&quot;Imunify360 database is corrupt. Application cannot run with corrupt database.&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>or some lines with</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&quot;sqlite3.DatabaseError&quot;.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>The <code>imunify360.db</code> file is an sqlite3 database the Imunify relies on; it contains incidents, malware hits/lists, settings, etc. Using this workaround will force the database recreation:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># service imunify-antivirus stop
# mv /var/imunify360/imunify360.db /var/imunify360/imunify360.db_backup
# service imunify-antivirus start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>If you face any difficulties during the progress or simply cannot make the agent start, please run</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># imunify-antivirus doctor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>and provide the output to our Support Team at <a href="https://cloudlinux.zendesk.com/hc/requests/new" target="_blank" rel="noopener noreferrer">https://cloudlinux.zendesk.com/hc/requests/new</a>.</p><h3 id="how-to-enable-disable-the-start-scanning-button-for-imunifyav-av" tabindex="-1"><a class="header-anchor" href="#how-to-enable-disable-the-start-scanning-button-for-imunifyav-av" aria-hidden="true">#</a> How to enable/disable the &quot;Start scanning&quot; button for ImunifyAV\\AV+</h3><p>To enable the &quot;Start scanning&quot; button, run the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># imunify-antivirus config update &#39;{&quot;PERMISSIONS&quot;: {&quot;allow_malware_scan&quot;: true}}&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>To disable the &quot;Start scanning&quot; button, run the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># imunify-antivirus config update &#39;{&quot;PERMISSIONS&quot;: {&quot;allow_malware_scan&quot;: false}}&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="our-customers-are-getting-emails-about-infections-how-can-we-disable-that-the-notify-on-website-infection-via-email-setting-is-already-disabled" tabindex="-1"><a class="header-anchor" href="#our-customers-are-getting-emails-about-infections-how-can-we-disable-that-the-notify-on-website-infection-via-email-setting-is-already-disabled" aria-hidden="true">#</a> Our customers are getting emails about infections. How can we disable that? The &quot;Notify on website infection via email&quot; setting is already disabled</h3><p>Try to switch off the &quot;Send notifications&quot; option in the &quot;Users&quot; menu as shown on the screenshot below:</p><p><img src="`+s+'" alt=""></p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Please note that the &quot;Adjust alert&quot; parameter prevents the user from changing the notification settings.</p></div>',38),o=[r];function l(c,u){return n(),t("div",null,o)}const h=i(d,[["render",l],["__file","index.html.vue"]]);export{h as default};
